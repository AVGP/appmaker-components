<element name="app-metronome">
  <script type="text/ceci">
    Ceci(this, {
      init: function() {
        this.period = 1000;
        this.count = 0;
        this.tick();
      },
      tick: function() {
        this.count++;
        this.emit(this.count);

        var t = this;
        var defer = function(){
          t.tick();
        };
        setTimeout(defer, this.period);
      },
      listeners: {
        setPeriod: function (val) {
          // errors?
          val = parseInt(val);
          if (val > 0) {
            this.setAttribute('period', val);
          }
        }
      }
    });
  </script>
</element>
